<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üÉè Tuzzilicchio - Gioco di Carte</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Lato:wght@300;400;700&display=swap"
        rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Lato', sans-serif;
            background: linear-gradient(135deg, #0d2818 0%, #1a472a 30%, #2d5a3f 50%, #1a472a 70%, #0d2818 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .title-font {
            font-family: 'Cinzel', serif;
        }

        /* Card Styles - Enhanced for Images */
        .card {
            border-radius: 10px;
            box-shadow:
                0 4px 8px rgba(0, 0, 0, 0.3),
                0 2px 4px rgba(0, 0, 0, 0.2);
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            user-select: none;
            overflow: hidden;
            background: #fff;
        }

        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
            pointer-events: none;
        }

        .card:hover:not(.card-disabled) {
            transform: translateY(-12px) scale(1.08);
            box-shadow:
                0 12px 24px rgba(0, 0, 0, 0.4),
                0 6px 12px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }

        .card-back {
            background:
                repeating-linear-gradient(45deg,
                    #8B0000 0px,
                    #8B0000 10px,
                    #6B0000 10px,
                    #6B0000 20px);
            border: 3px solid #ffd700;
            box-shadow:
                0 4px 8px rgba(0, 0, 0, 0.4),
                inset 0 0 20px rgba(0, 0, 0, 0.3);
        }

        .card-back::after {
            content: 'üÉè';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 28px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
        }

        .card-playable {
            animation: glowPulse 2s infinite;
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.6);
        }

        .card-selected {
            transform: translateY(-18px) scale(1.05) !important;
            box-shadow:
                0 0 30px rgba(251, 191, 36, 0.8),
                0 15px 30px rgba(0, 0, 0, 0.3) !important;
            outline: 4px solid #fbbf24;
        }

        .card-highlight {
            box-shadow:
                0 0 25px rgba(249, 115, 22, 0.8),
                0 4px 8px rgba(0, 0, 0, 0.3) !important;
            outline: 3px solid #f97316;
            animation: highlightBounce 0.5s ease;
        }

        .card-fallback {
            background: linear-gradient(165deg, #ffffff 0%, #f8f8f8 50%, #efefef 100%);
            border: 2.5px solid #c9c9c9;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        @keyframes glowPulse {

            0%,
            100% {
                box-shadow: 0 0 5px rgba(34, 197, 94, 0.4), 0 4px 8px rgba(0, 0, 0, 0.3);
            }

            50% {
                box-shadow: 0 0 25px rgba(34, 197, 94, 0.9), 0 4px 8px rgba(0, 0, 0, 0.3);
            }
        }

        @keyframes highlightBounce {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        @keyframes dealCard {
            from {
                transform: translateY(-300px) translateX(100px) rotate(20deg) scale(0.5);
                opacity: 0;
            }

            to {
                transform: translateY(0) translateX(0) rotate(0) scale(1);
                opacity: 1;
            }
        }

        @keyframes scopaFlash {

            0%,
            100% {
                background-color: transparent;
            }

            25%,
            75% {
                background-color: rgba(251, 191, 36, 0.4);
            }
        }

        .deal-animation {
            animation: dealCard 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .scopa-flash {
            animation: scopaFlash 0.6s ease 3;
        }

        /* Enhanced Table felt texture */
        .table-felt {
            background:
                radial-gradient(ellipse at center, #2d6b4a 0%, #1e4d35 40%, #153728 100%);
            border: 12px solid #3d2817;
            border-radius: 20px;
            box-shadow:
                inset 0 0 100px rgba(0, 0, 0, 0.4),
                inset 0 0 50px rgba(0, 0, 0, 0.2),
                0 10px 30px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .table-felt::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.05'/%3E%3C/svg%3E");
            border-radius: 8px;
            pointer-events: none;
        }

        /* Notification Toast - Enhanced */
        .toast {
            animation: toastSlide 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            backdrop-filter: blur(10px);
        }

        @keyframes toastSlide {
            from {
                transform: translateX(120%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Chat Styles */
        .chat-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 320px;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .chat-minimized {
            width: auto;
        }

        .chat-box {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .chat-messages {
            height: 200px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
        }

        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }

        .chat-message {
            animation: messageSlide 0.3s ease;
        }

        @keyframes messageSlide {
            from {
                transform: translateY(10px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Player avatar */
        .player-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        /* Score badge */
        .score-badge {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            padding: 2px 10px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 12px;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.4);
        }

        /* Button styles */
        .btn-primary {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(34, 197, 94, 0.6);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.6);
        }

        .btn-special {
            background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.4);
        }

        .btn-special:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(168, 85, 247, 0.6);
        }

        /* Glass effect */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .chat-container {
                width: calc(100% - 40px);
                left: 20px;
                right: 20px;
            }
        }

        /* Custom scrollbar for body */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;

        // Socket connection
        const socket = io();

        // Suit symbols and colors - Enhanced with Italian names
        const SUIT_INFO = {
            denari: { symbol: '‚ô¶', code: 'D', color: '#FFD700', bgColor: '#FFF8DC', name: 'Denari' },
            coppe: { symbol: '‚ô•', code: 'C', color: '#DC143C', bgColor: '#FFE4E6', name: 'Coppe' },
            bastoni: { symbol: '‚ô£', code: 'B', color: '#228B22', bgColor: '#F0FFF0', name: 'Bastoni' },
            spade: { symbol: '‚ô†', code: 'S', color: '#4169E1', bgColor: '#E6E6FA', name: 'Spade' }
        };

        // Helper function to get card image path
        const getCardImageSrc = (card) => {
            if (!card) return null;
            // Format: /assets/cards/{value}{SuitCode}.jpg
            // Example: 1D.jpg for Asso di Denari, 10B.jpg for Re di Bastoni
            const suitCode = SUIT_INFO[card.suit]?.code || card.suit.charAt(0).toUpperCase();
            return `/assets/cards/${card.value}${suitCode}.jpg`;
        };

        // Get figure name for display
        const getFigureName = (value) => {
            const names = { 8: 'Fante', 9: 'Cavallo', 10: 'Re' };
            return names[value] || null;
        };

        // Card size configurations
        const CARD_SIZES = {
            small: { width: 55, height: 85 },
            normal: { width: 80, height: 120 },
            large: { width: 100, height: 150 }
        };

        // ============ CHAT COMPONENT ============
        const Chat = ({ isOpen, onToggle }) => {
            const [messages, setMessages] = useState([]);
            const [inputValue, setInputValue] = useState('');
            const [unreadCount, setUnreadCount] = useState(0);
            const messagesEndRef = useRef(null);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            };

            useEffect(() => {
                socket.on('chatMessage', (data) => {
                    setMessages(prev => [...prev, { ...data, id: Date.now(), type: 'message' }]);
                    if (!isOpen) {
                        setUnreadCount(prev => prev + 1);
                    }
                });

                socket.on('notification', (data) => {
                    if (data.type === 'playerJoined' || data.type === 'playerLeft') {
                        setMessages(prev => [...prev, {
                            id: Date.now(),
                            type: 'system',
                            message: data.message
                        }]);
                    }
                });

                return () => {
                    socket.off('chatMessage');
                };
            }, [isOpen]);

            useEffect(() => {
                scrollToBottom();
            }, [messages]);

            useEffect(() => {
                if (isOpen) setUnreadCount(0);
            }, [isOpen]);

            const sendMessage = () => {
                if (!inputValue.trim()) return;
                socket.emit('chatMessage', { message: inputValue.trim() });
                setInputValue('');
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter') sendMessage();
            };

            if (!isOpen) {
                return (
                    <div className="chat-container chat-minimized">
                        <button
                            onClick={onToggle}
                            className="relative bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 rounded-full shadow-lg hover:scale-110 transition-transform"
                        >
                            <span className="text-xl">üí¨</span>
                            {unreadCount > 0 && (
                                <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center animate-pulse">
                                    {unreadCount}
                                </span>
                            )}
                        </button>
                    </div>
                );
            }

            return (
                <div className="chat-container">
                    <div className="chat-box">
                        {/* Header */}
                        <div className="flex items-center justify-between p-3 bg-gradient-to-r from-indigo-600 to-purple-600">
                            <span className="text-white font-bold flex items-center gap-2">
                                üí¨ Chat
                            </span>
                            <button
                                onClick={onToggle}
                                className="text-white/80 hover:text-white text-xl transition-colors"
                            >
                                ‚úï
                            </button>
                        </div>

                        {/* Messages */}
                        <div className="chat-messages p-3 space-y-2">
                            {messages.length === 0 && (
                                <p className="text-gray-500 text-center text-sm py-4">
                                    Nessun messaggio ancora...
                                </p>
                            )}
                            {messages.map(msg => (
                                <div key={msg.id} className="chat-message">
                                    {msg.type === 'system' ? (
                                        <p className="text-center text-gray-400 text-xs italic py-1">
                                            {msg.message}
                                        </p>
                                    ) : (
                                        <div className="flex items-start gap-2">
                                            <span className="text-indigo-400 font-medium text-sm shrink-0">
                                                {msg.playerName}:
                                            </span>
                                            <span className="text-gray-200 text-sm break-words">
                                                {msg.message}
                                            </span>
                                        </div>
                                    )}
                                </div>
                            ))}
                            <div ref={messagesEndRef} />
                        </div>

                        {/* Input */}
                        <div className="p-3 border-t border-white/10">
                            <div className="flex gap-2">
                                <input
                                    type="text"
                                    value={inputValue}
                                    onChange={(e) => setInputValue(e.target.value)}
                                    onKeyPress={handleKeyPress}
                                    placeholder="Scrivi un messaggio..."
                                    className="flex-1 bg-white/10 text-white placeholder-gray-400 px-3 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                    maxLength={200}
                                />
                                <button
                                    onClick={sendMessage}
                                    className="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg transition-colors"
                                >
                                    üì§
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // ============ CARD COMPONENT - With Image Support ============
        const Card = ({ card, onClick, isPlayable, isSelected, isHighlighted, isBack, size = 'normal', animationDelay = 0, isDraggable = false }) => {
            const [imageError, setImageError] = useState(false);
            const [imageLoaded, setImageLoaded] = useState(false);

            if (!card && !isBack) return null;

            const dimensions = CARD_SIZES[size];

            // Card back
            if (isBack) {
                return (
                    <div
                        className="card card-back"
                        style={{ width: dimensions.width, height: dimensions.height }}
                    />
                );
            }

            const suit = SUIT_INFO[card.suit];
            const figureName = getFigureName(card.value);
            const imageSrc = getCardImageSrc(card);
            const showFallback = imageError || !imageLoaded;

            return (
                <div
                    className={`card deal-animation relative
                        ${isPlayable ? 'card-playable' : ''}
                        ${isSelected ? 'card-selected' : ''}
                        ${isHighlighted ? 'card-highlight' : ''}
                        ${!isPlayable && onClick ? 'card-disabled opacity-60 cursor-not-allowed' : ''}
                        ${showFallback ? 'card-fallback' : ''}
                    `}
                    onClick={isPlayable || !onClick ? onClick : undefined}
                    draggable={isDraggable && isPlayable}
                    style={{
                        width: dimensions.width,
                        height: dimensions.height,
                        animationDelay: `${animationDelay}ms`
                    }}
                    title={figureName ? `${card.value} - ${figureName} di ${suit.name}` : `${card.value} di ${suit.name}`}
                >
                    {/* Card Image */}
                    <img
                        src={imageSrc}
                        alt={`${card.value} di ${suit.name}`}
                        className={`card-image ${imageLoaded && !imageError ? 'block' : 'hidden'}`}
                        onLoad={() => setImageLoaded(true)}
                        onError={() => setImageError(true)}
                        draggable={false}
                    />

                    {/* Fallback display when image fails or loading */}
                    {showFallback && (
                        <>
                            {/* Top left corner */}
                            <div className="absolute top-1 left-1.5 flex flex-col items-center leading-none">
                                <span
                                    className="font-black"
                                    style={{ color: suit.color, fontSize: size === 'small' ? 10 : 14 }}
                                >
                                    {card.value}
                                </span>
                                <span style={{ color: suit.color, fontSize: size === 'small' ? 8 : 12 }}>
                                    {suit.symbol}
                                </span>
                            </div>

                            {/* Center symbol */}
                            <div className="absolute inset-0 flex items-center justify-center">
                                <div className="flex flex-col items-center">
                                    <span
                                        style={{
                                            color: suit.color,
                                            fontSize: size === 'small' ? 18 : 32,
                                            filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'
                                        }}
                                    >
                                        {suit.symbol}
                                    </span>
                                    {figureName && size !== 'small' && (
                                        <span
                                            className="text-xs font-medium mt-0.5 opacity-70"
                                            style={{ color: suit.color }}
                                        >
                                            {figureName}
                                        </span>
                                    )}
                                </div>
                            </div>

                            {/* Bottom right corner (inverted) */}
                            <div className="absolute bottom-1 right-1.5 flex flex-col items-center leading-none rotate-180">
                                <span
                                    className="font-black"
                                    style={{ color: suit.color, fontSize: size === 'small' ? 10 : 14 }}
                                >
                                    {card.value}
                                </span>
                                <span style={{ color: suit.color, fontSize: size === 'small' ? 8 : 12 }}>
                                    {suit.symbol}
                                </span>
                            </div>
                        </>
                    )}
                </div>
            );
        };

        // ============ LOBBY COMPONENT ============
        const Lobby = ({ onGameStart }) => {
            const [playerName, setPlayerName] = useState('');
            const [roomCode, setRoomCode] = useState('');
            const [isJoining, setIsJoining] = useState(false);
            const [error, setError] = useState('');
            const [isLoading, setIsLoading] = useState(false);

            const handleCreate = () => {
                if (!playerName.trim()) {
                    setError('Inserisci un nome');
                    return;
                }
                setIsLoading(true);
                socket.emit('createRoom', { playerName: playerName.trim() });
            };

            const handleJoin = () => {
                if (!playerName.trim()) {
                    setError('Inserisci un nome');
                    return;
                }
                if (!roomCode.trim()) {
                    setError('Inserisci il codice stanza');
                    return;
                }
                setIsLoading(true);
                socket.emit('joinRoom', { roomCode: roomCode.trim(), playerName: playerName.trim() });
            };

            useEffect(() => {
                socket.on('error', (data) => {
                    setError(data.message);
                    setIsLoading(false);
                });
                return () => socket.off('error');
            }, []);

            return (
                <div className="min-h-screen flex items-center justify-center p-4">
                    {/* Decorative background cards */}
                    <div className="fixed inset-0 overflow-hidden pointer-events-none opacity-10">
                        {[...Array(8)].map((_, i) => (
                            <div
                                key={i}
                                className="absolute text-8xl"
                                style={{
                                    left: `${10 + (i * 12)}%`,
                                    top: `${20 + (i % 3) * 25}%`,
                                    transform: `rotate(${-15 + i * 8}deg)`
                                }}
                            >
                                üÉè
                            </div>
                        ))}
                    </div>

                    <div className="relative bg-white/95 backdrop-blur-lg rounded-3xl shadow-2xl p-8 w-full max-w-md border border-white/50">
                        {/* Logo */}
                        <div className="text-center mb-6">
                            <div className="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-700 rounded-2xl shadow-lg mb-4">
                                <span className="text-4xl">üÉè</span>
                            </div>
                            <h1 className="title-font text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-green-700 to-emerald-600">
                                Tuzzilicchio
                            </h1>
                            <p className="text-gray-500 mt-2">
                                La Scopa napoletana con varianti speciali
                            </p>
                        </div>

                        {error && (
                            <div className="bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg mb-4 flex items-center gap-2">
                                <span>‚ö†Ô∏è</span>
                                <span>{error}</span>
                            </div>
                        )}

                        <div className="space-y-4">
                            <div className="relative">
                                <span className="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">üë§</span>
                                <input
                                    type="text"
                                    placeholder="Il tuo nome"
                                    value={playerName}
                                    onChange={(e) => setPlayerName(e.target.value)}
                                    className="w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none text-lg transition-colors bg-gray-50 focus:bg-white"
                                    maxLength={20}
                                />
                            </div>

                            {!isJoining ? (
                                <>
                                    <button
                                        onClick={handleCreate}
                                        disabled={isLoading}
                                        className="w-full btn-primary text-white font-bold py-4 px-6 rounded-xl text-lg flex items-center justify-center gap-2 disabled:opacity-50"
                                    >
                                        {isLoading ? '‚è≥ Creazione...' : 'üéÆ Crea Nuova Partita'}
                                    </button>
                                    <button
                                        onClick={() => setIsJoining(true)}
                                        className="w-full btn-secondary text-white font-bold py-4 px-6 rounded-xl text-lg flex items-center justify-center gap-2"
                                    >
                                        üö™ Unisciti a una Partita
                                    </button>
                                </>
                            ) : (
                                <>
                                    <div className="relative">
                                        <span className="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">üîë</span>
                                        <input
                                            type="text"
                                            placeholder="Codice Stanza"
                                            value={roomCode}
                                            onChange={(e) => setRoomCode(e.target.value.toUpperCase())}
                                            className="w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none text-xl tracking-[0.3em] text-center font-mono bg-gray-50 focus:bg-white"
                                            maxLength={5}
                                        />
                                    </div>
                                    <button
                                        onClick={handleJoin}
                                        disabled={isLoading}
                                        className="w-full btn-secondary text-white font-bold py-4 px-6 rounded-xl text-lg flex items-center justify-center gap-2 disabled:opacity-50"
                                    >
                                        {isLoading ? '‚è≥ Connessione...' : '‚úÖ Entra nella Stanza'}
                                    </button>
                                    <button
                                        onClick={() => setIsJoining(false)}
                                        className="w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-3 px-4 rounded-xl transition-colors"
                                    >
                                        ‚Üê Indietro
                                    </button>
                                </>
                            )}
                        </div>

                        {/* Rules card */}
                        <div className="mt-8 p-5 bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl border border-amber-200">
                            <h3 className="font-bold text-amber-800 mb-3 flex items-center gap-2">
                                <span>üìú</span> Regole Speciali
                            </h3>
                            <ul className="text-sm text-amber-700 space-y-2">
                                <li className="flex items-start gap-2">
                                    <span className="shrink-0">üÉè</span>
                                    <span><strong>Asso Piglia Tutto:</strong> L'1 prende tutte le carte dal tavolo</span>
                                </li>
                                <li className="flex items-start gap-2">
                                    <span className="shrink-0">üéØ</span>
                                    <span><strong>Accoppia 11:</strong> Puoi prendere carte che insieme fanno 11</span>
                                </li>
                                <li className="flex items-start gap-2">
                                    <span className="shrink-0">üëä</span>
                                    <span><strong>Tozzolo:</strong> Coppia/tris di 1, 2, 3 = 3 punti extra!</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            );
        };

        // ============ WAITING ROOM COMPONENT ============
        const WaitingRoom = ({ gameState, playerId }) => {
            const currentPlayer = gameState.players.find(p => p.socketId === socket.id);
            const [copied, setCopied] = useState(false);

            const handleReady = () => {
                socket.emit('playerReady');
            };

            const copyCode = () => {
                navigator.clipboard.writeText(gameState.roomId);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            const playerColors = ['from-blue-500 to-indigo-600', 'from-purple-500 to-pink-600', 'from-orange-500 to-red-600', 'from-teal-500 to-cyan-600'];

            return (
                <div className="min-h-screen flex items-center justify-center p-4">
                    <div className="bg-white/95 backdrop-blur-lg rounded-3xl shadow-2xl p-8 w-full max-w-lg">
                        {/* Room Code */}
                        <div className="text-center mb-8">
                            <p className="text-gray-500 mb-2">Codice Stanza</p>
                            <div
                                className="inline-flex items-center gap-3 bg-gradient-to-r from-gray-100 to-gray-200 px-6 py-3 rounded-2xl cursor-pointer hover:from-gray-200 hover:to-gray-300 transition-colors"
                                onClick={copyCode}
                            >
                                <span className="title-font text-4xl font-black tracking-[0.2em] text-gray-800">
                                    {gameState.roomId}
                                </span>
                                <span className="text-2xl">{copied ? '‚úÖ' : 'üìã'}</span>
                            </div>
                            <p className="text-sm text-gray-400 mt-2">
                                {copied ? 'Copiato!' : 'Clicca per copiare'}
                            </p>
                        </div>

                        {/* Players Grid */}
                        <div className="grid grid-cols-2 gap-4 mb-6">
                            {[0, 1, 2, 3].map((idx) => {
                                const player = gameState.players[idx];
                                return (
                                    <div
                                        key={idx}
                                        className={`relative p-4 rounded-2xl transition-all ${player
                                                ? 'bg-white shadow-lg border-2 ' + (player.isReady ? 'border-green-400' : 'border-gray-200')
                                                : 'bg-gray-100 border-2 border-dashed border-gray-300'
                                            }`}
                                    >
                                        {player ? (
                                            <>
                                                <div className={`player-avatar mx-auto mb-2 bg-gradient-to-br ${playerColors[idx]}`}>
                                                    {player.name.charAt(0).toUpperCase()}
                                                </div>
                                                <p className={`text-center font-medium truncate ${player.socketId === socket.id ? 'text-green-600' : 'text-gray-800'
                                                    }`}>
                                                    {player.name}
                                                    {player.socketId === socket.id && ' (Tu)'}
                                                </p>
                                                <div className={`text-center mt-2 px-3 py-1 rounded-full text-xs font-medium ${player.isReady
                                                        ? 'bg-green-100 text-green-700'
                                                        : 'bg-yellow-100 text-yellow-700'
                                                    }`}>
                                                    {player.isReady ? '‚úÖ Pronto' : '‚è≥ In attesa'}
                                                </div>
                                            </>
                                        ) : (
                                            <div className="text-center py-4">
                                                <div className="w-12 h-12 mx-auto mb-2 rounded-full bg-gray-200 flex items-center justify-center">
                                                    <span className="text-gray-400 text-2xl">?</span>
                                                </div>
                                                <p className="text-gray-400 text-sm">In attesa...</p>
                                            </div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>

                        {/* Ready Button */}
                        <button
                            onClick={handleReady}
                            className={`w-full font-bold py-4 px-6 rounded-xl transition-all text-lg text-white ${currentPlayer?.isReady
                                    ? 'bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600'
                                    : 'btn-primary'
                                }`}
                        >
                            {currentPlayer?.isReady ? '‚ùå Non sono pronto' : '‚úÖ Sono Pronto!'}
                        </button>

                        {gameState.players.length < 2 && (
                            <p className="text-center text-gray-500 mt-4 flex items-center justify-center gap-2">
                                <span className="animate-pulse">üë•</span>
                                Servono almeno 2 giocatori per iniziare
                            </p>
                        )}
                    </div>
                </div>
            );
        };

        // ============ GAME TABLE COMPONENT ============
        const GameTable = ({ gameState }) => {
            const [selectedCard, setSelectedCard] = useState(null);
            const [showCaptureModal, setShowCaptureModal] = useState(false);
            const [captureOptions, setCaptureOptions] = useState([]);
            const [highlightedTableCards, setHighlightedTableCards] = useState([]);
            const [notifications, setNotifications] = useState([]);
            const [chatOpen, setChatOpen] = useState(false);

            const currentPlayer = gameState.players.find(p => p.socketId === socket.id);
            const isMyTurn = gameState.currentPlayerId === socket.id;
            const hasTozzolo = currentPlayer?.hasTozzolo;

            // Add notification
            const addNotification = useCallback((notification) => {
                const id = Date.now();
                setNotifications(prev => [...prev, { ...notification, id }]);
                setTimeout(() => {
                    setNotifications(prev => prev.filter(n => n.id !== id));
                }, 4000);
            }, []);

            // Socket event handlers
            useEffect(() => {
                socket.on('notification', addNotification);
                socket.on('error', (data) => addNotification({ type: 'error', message: data.message }));

                return () => {
                    socket.off('notification');
                    socket.off('error');
                };
            }, [addNotification]);

            // Handle card selection
            const handleCardClick = (card) => {
                if (!isMyTurn) return;

                const captures = gameState.possibleCaptures[card.id] || [];

                if (selectedCard?.id === card.id) {
                    setSelectedCard(null);
                    setHighlightedTableCards([]);
                } else {
                    setSelectedCard(card);

                    if (captures.length > 0) {
                        const allCaptureCards = captures.flatMap(c => c.cards.map(cc => cc.id));
                        setHighlightedTableCards([...new Set(allCaptureCards)]);
                    } else {
                        setHighlightedTableCards([]);
                    }
                }
            };

            // Handle playing a card
            const handlePlayCard = () => {
                if (!selectedCard || !isMyTurn) return;

                const captures = gameState.possibleCaptures[selectedCard.id] || [];

                if (captures.length > 1) {
                    setCaptureOptions(captures);
                    setShowCaptureModal(true);
                } else {
                    socket.emit('playCard', { cardId: selectedCard.id, captureChoice: 0 });
                    setSelectedCard(null);
                    setHighlightedTableCards([]);
                }
            };

            // Handle capture choice from modal
            const handleCaptureChoice = (index) => {
                socket.emit('playCard', { cardId: selectedCard.id, captureChoice: index });
                setSelectedCard(null);
                setHighlightedTableCards([]);
                setShowCaptureModal(false);
                setCaptureOptions([]);
            };

            // Handle Tozzolo declaration
            const handleTozzolo = () => {
                socket.emit('declareTozzolo');
            };

            // Other players (opponents)
            const opponents = gameState.players.filter(p => p.socketId !== socket.id);

            const playerColors = ['from-blue-500 to-indigo-600', 'from-purple-500 to-pink-600', 'from-orange-500 to-red-600'];

            return (
                <div className="min-h-screen flex flex-col relative">
                    {/* Notifications */}
                    <div className="fixed top-20 right-4 z-50 space-y-2">
                        {notifications.map(notif => (
                            <div
                                key={notif.id}
                                className={`toast px-5 py-3 rounded-xl shadow-2xl text-white font-medium max-w-sm flex items-center gap-3 ${notif.type === 'scopa' ? 'bg-gradient-to-r from-yellow-500 to-amber-600' :
                                        notif.type === 'tozzolo' ? 'bg-gradient-to-r from-purple-600 to-indigo-600' :
                                            notif.type === 'assoPigliaTutto' ? 'bg-gradient-to-r from-red-600 to-pink-600' :
                                                notif.type === 'error' ? 'bg-gradient-to-r from-red-500 to-red-700' :
                                                    'bg-gradient-to-r from-blue-600 to-indigo-600'
                                    }`}
                            >
                                <span className="text-2xl">
                                    {notif.type === 'scopa' ? 'üßπ' :
                                        notif.type === 'tozzolo' ? 'üëä' :
                                            notif.type === 'assoPigliaTutto' ? 'üÉè' :
                                                notif.type === 'error' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è'}
                                </span>
                                <span>{notif.message}</span>
                            </div>
                        ))}
                    </div>

                    {/* Game Info Bar */}
                    <div className="bg-gradient-to-r from-green-900 via-green-800 to-green-900 text-white py-3 px-4 flex justify-between items-center shadow-lg">
                        <div className="flex items-center gap-4">
                            <span className="title-font font-bold text-xl flex items-center gap-2">
                                <span className="text-2xl">üÉè</span> Tuzzilicchio
                            </span>
                            <div className="hidden sm:flex items-center gap-3 text-sm">
                                <span className="glass px-3 py-1 rounded-full">
                                    üé≤ Round {gameState.roundNumber}
                                </span>
                                <span className="glass px-3 py-1 rounded-full">
                                    üìö Mazzo: {gameState.deckRemaining}
                                </span>
                            </div>
                        </div>
                        <div className="flex items-center gap-3">
                            {gameState.players.map((p, idx) => (
                                <div
                                    key={p.id}
                                    className={`flex items-center gap-2 px-3 py-1 rounded-full transition-all ${p.socketId === gameState.currentPlayerId
                                            ? 'bg-yellow-500/30 ring-2 ring-yellow-400'
                                            : 'bg-white/10'
                                        }`}
                                >
                                    <span className="text-sm font-medium">{p.name}</span>
                                    <span className="score-badge">{p.totalScore}</span>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Main Game Area */}
                    <div className="flex-1 flex flex-col">
                        {/* Opponents Area */}
                        <div className="flex justify-center gap-6 py-4 px-4 bg-gradient-to-b from-green-900/80 to-transparent">
                            {opponents.map((opponent, idx) => (
                                <div
                                    key={opponent.id}
                                    className={`text-center p-3 rounded-xl transition-all ${opponent.socketId === gameState.currentPlayerId
                                            ? 'bg-yellow-500/20 ring-2 ring-yellow-400/50'
                                            : 'bg-black/20'
                                        }`}
                                >
                                    <div className={`player-avatar mx-auto mb-2 bg-gradient-to-br ${playerColors[idx]}`}>
                                        {opponent.name.charAt(0).toUpperCase()}
                                    </div>
                                    <div className={`text-white font-medium mb-2 ${opponent.socketId === gameState.currentPlayerId ? 'text-yellow-300' : ''
                                        }`}>
                                        {opponent.name}
                                        {opponent.socketId === gameState.currentPlayerId && ' üéØ'}
                                    </div>
                                    <div className="flex justify-center gap-1 mb-2">
                                        {Array(opponent.handCount).fill(0).map((_, i) => (
                                            <Card key={i} isBack size="small" />
                                        ))}
                                    </div>
                                    <div className="flex justify-center gap-2 text-xs text-white/70">
                                        <span className="bg-white/10 px-2 py-0.5 rounded">üìö {opponent.captureCount}</span>
                                        <span className="bg-white/10 px-2 py-0.5 rounded">üßπ {opponent.scope}</span>
                                        <span className="bg-white/10 px-2 py-0.5 rounded">üëä {opponent.tozzoli}</span>
                                    </div>
                                </div>
                            ))}
                        </div>

                        {/* Table */}
                        <div className="flex-1 table-felt mx-4 my-2 flex flex-col items-center justify-center min-h-[250px] relative">
                            <div className="text-white/50 text-sm mb-4 font-medium">
                                {gameState.table.length === 0 ? '‚ú® Tavolo vuoto' : `${gameState.table.length} carte sul tavolo`}
                            </div>
                            <div className="flex flex-wrap justify-center gap-4 max-w-4xl px-4">
                                {gameState.table.map((card, idx) => (
                                    <Card
                                        key={card.id}
                                        card={card}
                                        isHighlighted={highlightedTableCards.includes(card.id)}
                                        animationDelay={idx * 80}
                                        size="normal"
                                    />
                                ))}
                            </div>

                            {/* Last hand indicator */}
                            {gameState.isLastHand && (
                                <div className="absolute bottom-4 right-4 bg-red-500/80 text-white text-xs px-3 py-1 rounded-full animate-pulse">
                                    ‚ö†Ô∏è Ultima mano!
                                </div>
                            )}
                        </div>

                        {/* Current Player Area */}
                        <div className="bg-gradient-to-t from-green-900 via-green-900/95 to-green-900/80 p-4 pb-6">
                            {/* Turn indicator */}
                            <div className="text-center mb-4">
                                {isMyTurn ? (
                                    <span className="inline-flex items-center gap-2 bg-gradient-to-r from-yellow-400 to-amber-500 text-black font-bold px-6 py-2 rounded-full shadow-lg animate-pulse">
                                        <span className="text-xl">üéØ</span> √à il tuo turno!
                                    </span>
                                ) : (
                                    <span className="text-white/70 flex items-center justify-center gap-2">
                                        <span className="w-2 h-2 bg-yellow-400 rounded-full animate-pulse"></span>
                                        Turno di: <strong className="text-yellow-300">{gameState.currentPlayerName}</strong>
                                    </span>
                                )}
                            </div>

                            {/* Player hand */}
                            <div className="flex justify-center gap-3 mb-4">
                                {currentPlayer?.hand.map((card, idx) => {
                                    const captures = gameState.possibleCaptures[card.id] || [];

                                    return (
                                        <Card
                                            key={card.id}
                                            card={card}
                                            onClick={() => handleCardClick(card)}
                                            isPlayable={isMyTurn}
                                            isSelected={selectedCard?.id === card.id}
                                            animationDelay={idx * 100}
                                            size="normal"
                                            isDraggable={true}
                                        />
                                    );
                                })}
                            </div>

                            {/* Action buttons */}
                            <div className="flex justify-center gap-4 flex-wrap">
                                {selectedCard && isMyTurn && (
                                    <button
                                        onClick={handlePlayCard}
                                        className="btn-secondary text-white font-bold py-3 px-8 rounded-xl flex items-center gap-2"
                                    >
                                        <span className="text-xl">üÉè</span> Gioca Carta
                                    </button>
                                )}

                                {hasTozzolo && (
                                    <button
                                        onClick={handleTozzolo}
                                        className="btn-special text-white font-bold py-3 px-8 rounded-xl flex items-center gap-2 animate-pulse"
                                    >
                                        <span className="text-xl">üëä</span> Bussa per Tozzolo!
                                    </button>
                                )}
                            </div>

                            {/* Player stats */}
                            <div className="flex justify-center gap-4 mt-4">
                                <div className="glass text-white/90 px-4 py-2 rounded-xl flex items-center gap-2">
                                    <span>üìö</span> Prese: <strong>{currentPlayer?.captureCount}</strong>
                                </div>
                                <div className="glass text-white/90 px-4 py-2 rounded-xl flex items-center gap-2">
                                    <span>üßπ</span> Scope: <strong>{currentPlayer?.scope}</strong>
                                </div>
                                <div className="glass text-white/90 px-4 py-2 rounded-xl flex items-center gap-2">
                                    <span>üëä</span> Tozzoli: <strong>{currentPlayer?.tozzoli}</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Chat */}
                    <Chat isOpen={chatOpen} onToggle={() => setChatOpen(!chatOpen)} />

                    {/* Capture Choice Modal */}
                    {showCaptureModal && (
                        <div className="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-2xl shadow-2xl p-6 max-w-lg w-full max-h-[80vh] overflow-y-auto">
                                <h3 className="text-2xl font-bold mb-4 flex items-center gap-2">
                                    <span>üéØ</span> Scegli la presa
                                </h3>
                                <div className="space-y-3">
                                    {captureOptions.map((capture, idx) => (
                                        <button
                                            key={idx}
                                            onClick={() => handleCaptureChoice(idx)}
                                            className="w-full p-4 border-2 border-gray-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition-all group"
                                        >
                                            <div className="flex items-center gap-3 flex-wrap">
                                                <span className="font-bold text-gray-600 group-hover:text-green-600">
                                                    {capture.type === 'assoPigliaTutto' ? 'üÉè Asso Piglia Tutto' :
                                                        capture.type === 'accoppia11' ? 'üéØ Accoppia 11' :
                                                            capture.type === 'direct' ? 'üìå Presa Diretta' :
                                                                '‚ûï Somma'}
                                                </span>
                                                <span className="text-gray-400">‚Üí</span>
                                                <div className="flex gap-2 flex-wrap">
                                                    {capture.cards.map(card => (
                                                        <span
                                                            key={card.id}
                                                            className="px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-1"
                                                            style={{
                                                                backgroundColor: SUIT_INFO[card.suit].color + '20',
                                                                color: SUIT_INFO[card.suit].color
                                                            }}
                                                        >
                                                            {card.value}
                                                            <span>{SUIT_INFO[card.suit].symbol}</span>
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                        </button>
                                    ))}
                                </div>
                                <button
                                    onClick={() => {
                                        setShowCaptureModal(false);
                                        setCaptureOptions([]);
                                    }}
                                    className="mt-4 w-full bg-gray-200 hover:bg-gray-300 py-3 rounded-xl font-medium transition-colors"
                                >
                                    ‚úï Annulla
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // ============ ROUND END COMPONENT ============
        const RoundEnd = ({ scores, gamePhase, winner }) => {
            const handleNextRound = () => {
                socket.emit('nextRound');
            };

            return (
                <div className="min-h-screen flex items-center justify-center p-4">
                    <div className="bg-white/95 backdrop-blur-lg rounded-3xl shadow-2xl p-8 w-full max-w-3xl">
                        <h2 className="title-font text-4xl font-black text-center mb-6">
                            {gamePhase === 'gameEnd' ? (
                                <span className="text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-amber-600">
                                    üèÜ Partita Terminata!
                                </span>
                            ) : (
                                <span className="text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-emerald-600">
                                    üìä Fine Round
                                </span>
                            )}
                        </h2>

                        {winner && (
                            <div className="text-center mb-8 bg-gradient-to-r from-yellow-100 to-amber-100 p-6 rounded-2xl border-2 border-yellow-300">
                                <span className="text-5xl mb-2 block">üéâ</span>
                                <p className="text-2xl font-bold text-yellow-800">
                                    {winner} ha vinto la partita!
                                </p>
                            </div>
                        )}

                        <div className="overflow-x-auto rounded-xl border border-gray-200">
                            <table className="w-full text-sm">
                                <thead>
                                    <tr className="bg-gradient-to-r from-green-600 to-emerald-600 text-white">
                                        <th className="p-3 text-left rounded-tl-xl">Giocatore</th>
                                        <th className="p-3 text-center">üßπ Scope</th>
                                        <th className="p-3 text-center">üìö Carte</th>
                                        <th className="p-3 text-center">üí∞ Denari</th>
                                        <th className="p-3 text-center">7‚ô¶</th>
                                        <th className="p-3 text-center">üé¥ Primiera</th>
                                        <th className="p-3 text-center">üëä Tozzoli</th>
                                        <th className="p-3 text-center font-bold bg-green-700">Round</th>
                                        <th className="p-3 text-center font-bold bg-green-800 rounded-tr-xl">Totale</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {scores.map((score, idx) => (
                                        <tr key={idx} className={`${idx % 2 === 0 ? 'bg-gray-50' : 'bg-white'} hover:bg-green-50 transition-colors`}>
                                            <td className="p-3 font-bold text-gray-800">{score.playerName}</td>
                                            <td className="p-3 text-center font-medium">{score.scope}</td>
                                            <td className="p-3 text-center">
                                                {score.cards}
                                                {score.cardsPoint ? <span className="text-green-600 font-bold"> (+1)</span> : ''}
                                            </td>
                                            <td className="p-3 text-center">
                                                {score.denari}
                                                {score.denariPoint ? <span className="text-green-600 font-bold"> (+1)</span> : ''}
                                            </td>
                                            <td className="p-3 text-center">
                                                {score.settebello ? <span className="text-green-600 font-bold">‚úÖ +1</span> : <span className="text-gray-400">‚Äî</span>}
                                            </td>
                                            <td className="p-3 text-center">
                                                {score.primiera}
                                                {score.primieraPoint ? <span className="text-green-600 font-bold"> (+1)</span> : ''}
                                            </td>
                                            <td className="p-3 text-center">
                                                <span className="text-purple-600 font-bold">
                                                    {score.tozzoli} (+{score.tozzoliPoints})
                                                </span>
                                            </td>
                                            <td className="p-3 text-center font-bold text-green-600 bg-green-100">
                                                +{score.roundTotal}
                                            </td>
                                            <td className="p-3 text-center font-black text-xl text-green-700 bg-green-200">
                                                {score.totalScore + score.roundTotal}
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>

                        {gamePhase !== 'gameEnd' ? (
                            <button
                                onClick={handleNextRound}
                                className="mt-8 w-full btn-primary text-white font-bold py-4 px-6 rounded-xl text-lg flex items-center justify-center gap-2"
                            >
                                <span className="text-xl">‚ñ∂Ô∏è</span> Prossimo Round
                            </button>
                        ) : (
                            <button
                                onClick={() => window.location.reload()}
                                className="mt-8 w-full btn-secondary text-white font-bold py-4 px-6 rounded-xl text-lg flex items-center justify-center gap-2"
                            >
                                <span className="text-xl">üîÑ</span> Nuova Partita
                            </button>
                        )}
                    </div>
                </div>
            );
        };

        // ============ MAIN APP COMPONENT ============
        const App = () => {
            const [gameState, setGameState] = useState(null);
            const [inRoom, setInRoom] = useState(false);
            const [roundEndData, setRoundEndData] = useState(null);

            useEffect(() => {
                socket.on('roomCreated', (data) => {
                    setInRoom(true);
                    setGameState(data.gameState);
                });

                socket.on('roomJoined', () => {
                    setInRoom(true);
                });

                socket.on('gameState', (state) => {
                    setGameState(state);
                    if (state.gamePhase === 'playing') {
                        setRoundEndData(null);
                    }
                });

                socket.on('roundEnd', (data) => {
                    setRoundEndData(data);
                });

                socket.on('gameEnd', (data) => {
                    setRoundEndData({ ...data, gamePhase: 'gameEnd', winner: data.winner, scores: data.finalScores });
                });

                return () => {
                    socket.off('roomCreated');
                    socket.off('roomJoined');
                    socket.off('gameState');
                    socket.off('roundEnd');
                    socket.off('gameEnd');
                };
            }, []);

            // Render based on game state
            if (!inRoom) {
                return <Lobby />;
            }

            if (roundEndData) {
                return <RoundEnd
                    scores={roundEndData.scores}
                    gamePhase={roundEndData.gamePhase}
                    winner={roundEndData.winner}
                />;
            }

            if (!gameState) {
                return (
                    <div className="min-h-screen flex items-center justify-center">
                        <div className="text-center">
                            <div className="inline-block animate-spin text-6xl mb-4">üÉè</div>
                            <p className="text-white text-xl">Caricamento...</p>
                        </div>
                    </div>
                );
            }

            if (gameState.gamePhase === 'waiting') {
                return <WaitingRoom gameState={gameState} />;
            }

            if (gameState.gamePhase === 'playing') {
                return <GameTable gameState={gameState} />;
            }

            return (
                <div className="min-h-screen flex items-center justify-center">
                    <div className="text-white text-xl">Stato sconosciuto: {gameState.gamePhase}</div>
                </div>
            );
        };

        // Render the app
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>

</html>